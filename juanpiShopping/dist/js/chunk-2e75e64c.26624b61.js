(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e75e64c"],{4565:function(e,t,s){"use strict";var n=s("e5ab"),a=s.n(n);a.a},d5c2:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("van-nav-bar",{attrs:{title:"注册","left-text":"返回","right-text":"登录","left-arrow":""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}}),e._m(0),s("van-cell-group",[s("van-field",{attrs:{clearable:"",placeholder:"请输入手机号码","error-message":e.usernameState,"right-icon":e.usernameIcon},on:{"click-right-icon":function(t){return e.$toast("question")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("van-field",{attrs:{clearable:"",type:"password",placeholder:"请输入密码","error-message":e.passwordState,"right-icon":e.passwordIcon},on:{"click-right-icon":function(t){return e.$toast("question")}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("van-field",{attrs:{clearable:"",placeholder:"请输入验证码"},on:{"click-right-icon":function(t){return e.$toast("question")}},model:{value:e.mescode,callback:function(t){e.mescode=t},expression:"mescode"}},[s("van-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{slot:"button",size:"small",type:"info"},on:{click:e.sendCode},slot:"button"},[e._v("获取验证码")]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count",attrs:{slot:"button",size:"small",type:"info"},slot:"button"},[e._v(e._s(e.count)+"s后重新发送")])],1)],1),s("van-button",{attrs:{type:"info",size:"normal",block:!0},on:{click:e.register}},[e._v("注册")])],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point"},[s("p",[e._v("请确保你的手机畅通，用于接收验证码短信")])])}],o=(s("34a3"),s("7903"),s("022c")),r=(s("1bc1"),s("d515")),c=(s("878f"),s("a3ff")),i=(s("609d"),s("2339")),u=(s("feca"),s("078e")),l=(s("7fef"),s("1915")),d=(s("69d1"),s("3505")),h=(s("6ffd"),s("a751")),f=(s("b573"),s("422e")),p=s("6e6d"),m=s("4f45");p["a"].use(f["a"]),p["a"].use(h["a"]),p["a"].use(l["a"]).use(d["a"]),p["a"].use(u["a"]),p["a"].use(i["a"]),p["a"].use(c["a"]),p["a"].use(r["a"]),p["a"].use(o["a"]);var w={data:function(){return{username:"",password:"",mescode:"",code:"",show:!0,count:"",timer:null}},computed:{usernameState:function(){return""===this.username?"":/^1[3456789]\d{9}$/.test(this.username)?"":(Object(i["a"])("手机号只能为11位数字以1开头，第二位为3到9"),"手机号格式错误")},usernameIcon:function(){return""===this.username?"":/^1[3456789]\d{9}$/.test(this.username)?"passed":""},passwordState:function(){return""===this.password?"":/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,19}$/.test(this.password)?"":(Object(i["a"])("密码只能为5-20个以字母开头、可带数字和.的字串"),"密码格式错误")},passwordIcon:function(){return""===this.password?"":/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,19}$/.test(this.password)?"passed":""}},methods:{onClickLeft:function(){this.$router.back()},onClickRight:function(){this.$router.replace("/login")},sendCode:function(){var e=this,t=60;this.timer||(this.count=t,this.show=!1,this.timer=Object(m["setInterval"])(function(){e.count>0&&e.count<=t?e.count--:(e.show=!0,Object(m["clearInterval"])(e.timer),e.timer=null)},1e3)),fetch("https://www.daxunxun.com/users/sendCode?tel="+this.username).then(function(e){return e.json()}).then(function(t){console.log(t),1===t?Object(r["a"])("手机号已经注册"):0===t?Object(r["a"])("手机号验证码获取失败"):e.code=t.code})},register:function(){var e=this;return"passed"!==this.usernameIcon?(Object(r["a"])("手机号格式错误"),null):"passed"!==this.passwordIcon?(Object(r["a"])("密码格式错误"),null):this.mescode!==this.code?(Object(r["a"])("验证码输入错误"),null):void fetch("https://www.daxunxun.com/users/register",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+this.username+"&password="+this.password}).then(function(e){return e.json()}).then(function(t){1===t?(Object(r["a"])("注册成功"),e.$router.push("/login")):2===t?o["a"].confirm({title:"提示",message:"该用户名已经注册，是否直接去登录"}).then(function(){e.$router.push("/login")}).catch(function(){}):Object(r["a"])("注册失败")})}}},b=w,v=(s("4565"),s("17cc")),g=Object(v["a"])(b,n,a,!1,null,null,null);t["default"]=g.exports},e5ab:function(e,t,s){}}]);
//# sourceMappingURL=chunk-2e75e64c.26624b61.js.map